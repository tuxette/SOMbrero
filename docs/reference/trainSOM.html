<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Run the SOM algorithm — trainSOM • SOMbrero</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Run the SOM algorithm — trainSOM"><meta property="og:description" content="The trainSOM function returns a somRes class 
object which contains the outputs of the algorithm."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SOMbrero</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a-doc-SOMbrero-package.html">SOMbrero Package description</a>
    </li>
    <li>
      <a href="../articles/b-doc-grids.html">A basic vignette on grids in SOMbrero</a>
    </li>
    <li>
      <a href="../articles/c-doc-numericSOM.html">Using Self-Organizing Maps with SOMbrero to cluster a numeric dataset</a>
    </li>
    <li>
      <a href="../articles/d-doc-korrespSOM.html">Using Self-Organizing Maps with SOMbrero for contingency tables</a>
    </li>
    <li>
      <a href="../articles/e-doc-relationalSOM.html">Using Self-Organizing Maps with SOMbrero for dissimilarity matrices</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/tuxette/sombrero/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run the SOM algorithm</h1>
    <small class="dont-index">Source: <a href="https://github.com/tuxette/sombrero/blob/HEAD/R/som.R" class="external-link"><code>R/som.R</code></a></small>
    <div class="hidden name"><code>trainSOM.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>trainSOM</code> function returns a <code>somRes</code> class 
object which contains the outputs of the algorithm.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">trainSOM</span><span class="op">(</span><span class="va">x.data</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for somRes</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for somRes</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x.data</dt>
<dd><p>a data frame or matrix containing the observations to be mapped
on the grid by the SOM algorithm.</p></dd>
<dt>...</dt>
<dd><p>Further arguments to be passed to the function 
<code><a href="initSOM.html">initSOM</a></code> for specifying the parameters of the algorithm. The 
default values of the arguments <code>maxit</code> and <code>dimension</code> are 
calculated according to the SOM type if the user does not set them:</p><ul><li><p><code>maxit</code> is equal to (number of rows+number of columns)*5 if the 
  SOM type is <code>korresp</code>. It is equal to number of rows*5 in all other 
  SOM types</p></li>
<li><p><code>dimension</code>: for a <code>korresp</code> SOM, is approximately equal to
  the square root of the number of observations to be classified divided by
  10 but it is never smaller than 5 or larger than 10.</p></li>
</ul></dd>
<dt>x</dt>
<dd><p>an object of class <code>somRes</code>.</p></dd>
<dt>object</dt>
<dd><p>an object of class <code>somRes</code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The <code>trainSOM</code> function returns an object of class <code>somRes</code>which contains the following components:</p><ul><li><p>clustering the final classification of the data.</p></li>
<li><p>prototypes the final coordinates of the prototypes.</p></li>
<li><p>energy the final energy of the map. For the numeric case, energy 
  with data having missing entries is based on data imputation as described
  in Cottrell and Letrémy (2005b).</p></li>
<li><p>backup a list containing some intermediate backups of the 
  prototypes coordinates, clustering, energy and the indexes of the recorded 
  backups, if <code>nb.save</code> is set to a value larger than 1.</p></li>
<li><p>data the original dataset used to train the algorithm.</p></li>
<li><p>parameters a list of the map's parameters, which is an object of 
  class <code>paramSOM</code> as produced by the function <code><a href="initSOM.html">initSOM</a></code>.</p></li>
</ul><p>The function <code>summary.somRes</code> also provides an ANOVA (ANalysis Of 
VAriance) of each input numeric variables in function of the map's clusters. 
This is helpful to see which variables participate to the clustering.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The version of the SOM algorithm implemented in this package is the
stochastic version.</p>
<p>Several variants able to handle non-vectorial data are also implemented in 
their stochastic versions: <code>type="korresp"</code> for contingency tables, as
described in Cottrell et al. (2004) (with weights as in Cottrell and Letrémy, 
2005a); <code>type = "relational"</code> for dissimilarity matrices, as described 
in Olteanu et al. (2015), with the fast implementation introduced in Mariette
<em>et al.</em> (2017).</p>
<p>Missing values are handled as described in Cottrell et al. (2005b), not using
missing entries of the selected observation during winner computation or 
prototype updates. This allows to proceed with the imputation of missing
entries with the corresponding entries of the cluster prototype (with 
<code><a href="impute.html">impute</a></code>).</p>
<p><code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></code> produces a complete summary of the results that 
displays the parameters of the SOM, quality criteria and ANOVA. For 
<code>type = "numeric"</code> the ANOVA is performed for each input variable and 
test the difference of this variable across the clusters of the map. For 
<code>type = "relational"</code> a dissimilarity ANOVA is performed (Anderson, 
2001), except that in the present version, a crude estimate of the p-value is
used which is based on the Fisher distribution and not on a permutation test.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Warning! Recording intermediate backups with the argument 
<code>nb.save</code> can strongly increase the computational time since calculating
the entire clustering and the energy is time consuming. Use this option with
care and only when it is strictly necessary.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Anderson M.J. (2001). A new method for non-parametric multivariate analysis 
of variance. <em>Austral Ecology</em>, <strong>26</strong>, 32-46.</p>
<p>Kohonen T. (2001) <em>Self-Organizing Maps</em>. Berlin/Heidelberg: 
Springer-Verlag, 3rd edition.</p>
<p>Cottrell M., Ibbou S., Letrémy P. (2004) SOM-based algorithms for qualitative
variables. <em>Neural Networks</em>, <strong>17</strong>, 1149-1167.</p>
<p>Cottrell M., Letrémy P. (2005a) How to use the Kohonen algorithm to 
simultaneously analyse individuals in a survey. <em>Neurocomputing</em>, 
<strong>21</strong>, 119-138.</p>
<p>Cottrell M., Letrémy P. (2005b) Missing values: processing with the Kohonen 
algorithm. <em>Proceedings of Applied Stochastic Models and Data Analysis
(ASMDA 2005)</em>, 489-496.</p>
<p>Olteanu M., Villa-Vialaneix N. (2015) On-line relational and multiple
relational SOM. <em>Neurocomputing</em>, <strong>147</strong>, 15-30.</p>
<p>Mariette J., Rossi F., Olteanu M., Mariette J. (2017) Accelerating stochastic 
kernel SOM. In: M. Verleysen, <em>XXVth European Symposium on Artificial 
Neural Networks, Computational Intelligence and Machine Learning (ESANN 
2017)</em>, i6doc, Bruges, Belgium, 269-274.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>See <code><a href="initSOM.html">initSOM</a></code> for a description of the parameters to 
pass to the trainSOM function to change its behavior and 
<code><a href="plot.somRes.html">plot.somRes</a></code> to plot the outputs of the algorithm.</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Élise Maigné &lt;elise.maigne@inrae.fr&gt;<br>
Jérome Mariette <a href="mailto:jerome.mariette@inrae.fr">jerome.mariette@inrae.fr</a><br>
Madalina Olteanu <a href="mailto:olteanu@ceremade.dauphine.fr">olteanu@ceremade.dauphine.fr</a><br>
Fabrice Rossi <a href="mailto:fabrice.rossi@apiacoa.org">fabrice.rossi@apiacoa.org</a><br>
Nathalie Vialaneix <a href="mailto:nathalie.vialaneix@inrae.fr">nathalie.vialaneix@inrae.fr</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Run trainSOM algorithm on the iris data with 500 iterations</span></span>
<span class="r-in"><span class="va">iris.som</span> <span class="op">&lt;-</span> <span class="fu">trainSOM</span><span class="op">(</span>x.data<span class="op">=</span><span class="va">iris</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span class="r-in"><span class="va">iris.som</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Self-Organizing Map object...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          online learning, type: numeric </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          5 x 5 grid with square topology</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          neighbourhood type: gaussian </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          distance type: euclidean </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">iris.som</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Class :  somRes </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Self-Organizing Map object...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          online learning, type: numeric </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          5 x 5 grid with square topology</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          neighbourhood type: gaussian </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          distance type: euclidean </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Final energy     : 0.8543395 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Topographic error: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       ANOVA                : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Degrees of freedom :  14 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    F pvalue significativity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Length  42.669      0             ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Width   18.012      0             ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petal.Length 295.589      0             ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petal.Width  160.906      0             ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nathalie Vialaneix, Elise Maigne, Jerome Mariette, Madalina Olteanu, Fabrice Rossi.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

